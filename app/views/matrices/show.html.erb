<p>
  <strong>Name:</strong>
  <%= @matrix.name %>
</p>
 
<!--***
<p>
  <strong>Category:</strong>
  <%= @matrix.category %>
</p>
-->

<hr/>

<h2>Categories</h2>
<%= render @matrix.categories %>

<br/>

<hr/>

<h2>Add a category</h2>
<%= render 'categories/form' %>

<hr/>

<%= link_to 'Edit', edit_matrix_path(@matrix) %> |
<%= link_to 'Back', matrices_path %>

<hr/>

<h2>Matrix</h2>

<table border="1">
	<tr>
		<th></th>
		<% isFirstCategory = true %>
		<% @matrix.categories.each do |category| %>
			<% if !isFirstCategory && !category.nil? && !category.name.nil? %> <%# ick %>
				<th><%= category.name %></th>
			<% else %>	
				<% isFirstCategory = false %>	
			<% end %>
		<% end %>
	</tr>

	<% numCategories = @matrix.categories.count %> <%# ick %>	

	<tr>
		<th><%= @matrix.categories.first.name %></th>
		<% for i in 1..(numCategories - 1) %>
			<td>&nbsp;</td>
		<% end %>
	</tr>

	<% @matrix.categories.reverse.each_with_index do |category, index| %>
		<% if index == numCategories - 1 %>
			<% break %>
		<% else %>
			<% if !category.nil? && !category.name.nil? %> <%# ick %>
				<tr>
					<th><%= category.name %></th>
					<% for i in 1..(numCategories - index - 1) %>
						<td>&nbsp;</td>
					<% end %>
				</tr>	
			<% end %>
		<% end %>
	<% end %>
</table>
